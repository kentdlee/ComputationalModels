

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>7. Pushdown Automata &#8212; Computational Models</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="6. Simplification of Context-Free Grammars and Normal Forms" href="../chap6/index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../chap6/index.html" title="6. Simplification of Context-Free Grammars and Normal Forms"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Computational Models</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/linz.jpg" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7. Pushdown Automata</a><ul>
<li><a class="reference internal" href="#nondeterminstic-pushdown-automata">7.1. Nondeterminstic Pushdown Automata</a></li>
<li><a class="reference internal" href="#ll-1-grammars">7.2. LL(1) Grammars</a></li>
<li><a class="reference internal" href="#lalr-1-grammars">7.3. LALR(1) Grammars</a></li>
<li><a class="reference internal" href="#building-the-lr0-machine">7.4. Building the LR0 Machine</a><ul>
<li><a class="reference internal" href="#the-completion-function">7.4.1. The Completion Function</a></li>
<li><a class="reference internal" href="#the-successor-function">7.4.2. The Successor Function</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-lr0state-class-and-its-components">7.5. The LR0State Class and its Components</a></li>
<li><a class="reference internal" href="#computing-lookahead-sets">7.6. Computing Lookahead Sets</a></li>
<li><a class="reference internal" href="#running-the-lalr-1-machine">7.7. Running the LALR(1) Machine</a></li>
<li><a class="reference internal" href="#exercises">7.8. Exercises</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../chap6/index.html"
                        title="previous chapter">6. Simplification of Context-Free Grammars and Normal Forms</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/chap7/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pushdown-automata">
<h1>7. Pushdown Automata<a class="headerlink" href="#pushdown-automata" title="Permalink to this headline">¶</a></h1>
<p>In this chapter we cover parsing as well as pushdown automata. One of the topics Linz does not cover is on the construction of a pushdown automaton from a context-free grammar. To begin, we must build the automaton which is called an LR0 machine for a grammar <img class="math" src="../_images/math/562751e5388bf9133f2566bb55ed3e82bcbf99bf.png" alt="G = (N,T,P,S)"/>.</p>
<div class="section" id="nondeterminstic-pushdown-automata">
<h2>7.1. Nondeterminstic Pushdown Automata<a class="headerlink" href="#nondeterminstic-pushdown-automata" title="Permalink to this headline">¶</a></h2>
<p>From a theoretical standpoint, nondeterministic pushdown automata are capable of recognizing context-free languages. However, from a practical standpoint they are of little interest. Nevertheless, the implementation of a nondeterministic pushdown automaton helps to illustrate how search can be implemented both recursively and iteratively. The code listing below contains two versions of the <strong>accepts</strong> method, the first (commented out) is the recursive version with an acceptsSuffix nested function much like the nondeterministic NFA from chapter 2. The second version of <strong>accepts</strong> is an iterative version which maintains a stack of unexplored instantaneous descriptions.</p>
<div class="figboxcenter docutils container">
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">streamreader</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">stack</span>


<span class="n">epsilon</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

<span class="k">class</span> <span class="nc">NPDA</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">startStateId</span><span class="p">,</span> <span class="n">stackStartSym</span><span class="p">,</span> <span class="n">finalStates</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startStateId</span> <span class="o">=</span> <span class="n">startStateId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stackStartSym</span> <span class="o">=</span> <span class="n">stackStartSym</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finalStates</span> <span class="o">=</span> <span class="n">finalStates</span>

    <span class="c1"># This is a working recursive version of accepts</span>
    <span class="c1">#def accepts(self,strm):</span>

        <span class="c1">#def matchTop(aStackTop, stack):</span>
            <span class="c1">#return stack[-1] == aStackTop</span>

        <span class="c1">#def getTransitions(stateId, stack):</span>
            <span class="c1">#transitionList = []</span>

            <span class="c1">#for aStateId, anInputSym, aStackTop in self.delta.keys():</span>
                <span class="c1">#if stateId == aStateId and matchTop(aStackTop, stack):</span>
                    <span class="c1">#transitionList.append((anInputSym, aStackTop))</span>

            <span class="c1">#return transitionList</span>

        <span class="c1">#def popPush(aStackTop, pushOnStack, stack):</span>
            <span class="c1">#newstack = stack[:]</span>
            <span class="c1">#for x in aStackTop:</span>
                <span class="c1">#newstack.pop()</span>
            <span class="c1">#for x in pushOnStack[::-1]:</span>
                <span class="c1">#newstack.append(x)</span>
            <span class="c1">#return newstack</span>


        <span class="c1">#def acceptsSuffix(stateId, stack):</span>

            <span class="c1">#c = strm.readChar()</span>
            <span class="c1">##print(stateId, c, stack)</span>

            <span class="c1">#if strm.eof() and stateId in self.finalStates:</span>
                <span class="c1">##print(stateId)</span>
                <span class="c1">#return True</span>

            <span class="c1">#strm.unreadChar(c)</span>

            <span class="c1">#for anInputSym, aStackTop in getTransitions(stateId, stack):</span>
                <span class="c1">#for toStateId, pushOnStack in self.delta[(stateId, anInputSym, aStackTop)]:</span>
                    <span class="c1">#if anInputSym == epsilon and acceptsSuffix(toStateId,popPush(aStackTop,pushOnStack,stack)):</span>
                            <span class="c1">#return True</span>
                    <span class="c1">#else: # not an epsilon transition</span>
                        <span class="c1">#c = strm.readChar()</span>
                        <span class="c1">#if c == anInputSym and acceptsSuffix(toStateId,popPush(aStackTop,pushOnStack,stack)):</span>
                            <span class="c1">#return True</span>
                        <span class="c1">#strm.unreadChar(c)</span>

            <span class="c1">#return False</span>

        <span class="c1">#return acceptsSuffix(self.startStateId, [self.stackStartSym])</span>

    <span class="c1"># This is an iterative version of accepts that works. It maintains</span>
    <span class="c1"># a stack of instantaneous descriptions that have yet to be explored.</span>
    <span class="k">def</span> <span class="nf">accepts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">strm</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">matchTop</span><span class="p">(</span><span class="n">aStackTop</span><span class="p">,</span> <span class="n">stack</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">aStackTop</span>

        <span class="k">def</span> <span class="nf">getTransitions</span><span class="p">(</span><span class="n">stateId</span><span class="p">,</span> <span class="n">stack</span><span class="p">):</span>
            <span class="n">transitionList</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">aStateId</span><span class="p">,</span> <span class="n">anInputSym</span><span class="p">,</span> <span class="n">aStackTop</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">stateId</span> <span class="o">==</span> <span class="n">aStateId</span> <span class="ow">and</span> <span class="n">matchTop</span><span class="p">(</span><span class="n">aStackTop</span><span class="p">,</span> <span class="n">stack</span><span class="p">):</span>
                    <span class="n">transitionList</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">anInputSym</span><span class="p">,</span> <span class="n">aStackTop</span><span class="p">))</span>

            <span class="k">return</span> <span class="n">transitionList</span>

        <span class="k">def</span> <span class="nf">popPush</span><span class="p">(</span><span class="n">aStackTop</span><span class="p">,</span> <span class="n">pushOnStack</span><span class="p">,</span> <span class="n">stack</span><span class="p">):</span>
            <span class="n">newstack</span> <span class="o">=</span> <span class="n">stack</span><span class="p">[:]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">aStackTop</span><span class="p">:</span>
                <span class="n">newstack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pushOnStack</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">newstack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">newstack</span>


        <span class="n">stateId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">startStateId</span>
        <span class="n">pdaStack</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">stackStartSym</span><span class="p">]</span>

        <span class="c1"># This is the instantaneous description stack. It starts with the start state</span>
        <span class="c1"># instantaneous description.</span>
        <span class="n">ID</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">Stack</span><span class="p">()</span>
        <span class="n">ID</span><span class="o">.</span><span class="n">push</span><span class="p">((</span><span class="n">stateId</span><span class="p">,</span><span class="n">strm</span><span class="p">,</span><span class="n">pdaStack</span><span class="p">))</span>

        <span class="k">while</span> <span class="ow">not</span> <span class="n">ID</span><span class="o">.</span><span class="n">isEmpty</span><span class="p">():</span>
            <span class="n">stateId</span><span class="p">,</span> <span class="n">strm</span><span class="p">,</span> <span class="n">pdaStack</span> <span class="o">=</span> <span class="n">ID</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">print</span><span class="p">((</span><span class="n">stateId</span><span class="p">,</span> <span class="n">strm</span><span class="p">,</span> <span class="n">pdaStack</span><span class="p">))</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">strm</span><span class="o">.</span><span class="n">readChar</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">strm</span><span class="o">.</span><span class="n">eof</span><span class="p">()</span> <span class="ow">and</span> <span class="n">stateId</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">finalStates</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>

            <span class="n">strm</span><span class="o">.</span><span class="n">unreadChar</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">anInputSym</span><span class="p">,</span> <span class="n">aStackTop</span> <span class="ow">in</span> <span class="n">getTransitions</span><span class="p">(</span><span class="n">stateId</span><span class="p">,</span> <span class="n">pdaStack</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">toStateId</span><span class="p">,</span> <span class="n">pushOnStack</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta</span><span class="p">[(</span><span class="n">stateId</span><span class="p">,</span> <span class="n">anInputSym</span><span class="p">,</span> <span class="n">aStackTop</span><span class="p">)]:</span>
                    <span class="k">if</span> <span class="n">anInputSym</span> <span class="o">==</span> <span class="n">epsilon</span><span class="p">:</span>
                        <span class="n">ID</span><span class="o">.</span><span class="n">push</span><span class="p">((</span><span class="n">toStateId</span><span class="p">,</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">strm</span><span class="p">),</span><span class="n">popPush</span><span class="p">(</span><span class="n">aStackTop</span><span class="p">,</span><span class="n">pushOnStack</span><span class="p">,</span><span class="n">pdaStack</span><span class="p">)))</span>
                    <span class="k">else</span><span class="p">:</span> <span class="c1"># not an epsilon transition</span>
                        <span class="n">c</span> <span class="o">=</span> <span class="n">strm</span><span class="o">.</span><span class="n">readChar</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="n">anInputSym</span><span class="p">:</span>
                            <span class="n">ID</span><span class="o">.</span><span class="n">push</span><span class="p">((</span><span class="n">toStateId</span><span class="p">,</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">strm</span><span class="p">),</span><span class="n">popPush</span><span class="p">(</span><span class="n">aStackTop</span><span class="p">,</span><span class="n">pushOnStack</span><span class="p">,</span><span class="n">pdaStack</span><span class="p">)))</span>
                        <span class="n">strm</span><span class="o">.</span><span class="n">unreadChar</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">False</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>

    <span class="n">delta</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># delta[(statedId, inputsym, stacktop)] = (newstateid, stacktop&#39;)</span>
    <span class="c1">#This is a^n b^n</span>
    <span class="c1">#delta[(0, &quot;a&quot;, &quot;0&quot;)] = set([(1,&quot;10&quot;)])</span>
    <span class="c1">#delta[(0, epsilon, &quot;0&quot;)] = set([(3, &quot;&quot;)])</span>
    <span class="c1">#delta[(1,&quot;a&quot;,&quot;1&quot;)] = set([(1,&quot;11&quot;)])</span>
    <span class="c1">#delta[(1,&quot;b&quot;,&quot;1&quot;)] = set([(2,&quot;&quot;)])</span>
    <span class="c1">#delta[(2,&quot;b&quot;,&quot;1&quot;)] = set([(2,&quot;&quot;)])</span>
    <span class="c1">#delta[(2,epsilon,&quot;0&quot;)] = set([(3,&quot;&quot;)])</span>
    <span class="c1">#npda = NPDA(delta,0,&quot;0&quot;,set([3]))</span>

    <span class="c1">#This is ww^R the a word with its reverse appended. Language of a&#39;s and b&#39;s.</span>
    <span class="n">delta</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;aa&quot;</span><span class="p">)])</span>
    <span class="n">delta</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;ba&quot;</span><span class="p">)])</span>
    <span class="n">delta</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;ab&quot;</span><span class="p">)])</span>
    <span class="n">delta</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;bb&quot;</span><span class="p">)])</span>
    <span class="n">delta</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;z&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;az&quot;</span><span class="p">)])</span>
    <span class="n">delta</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;z&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;bz&quot;</span><span class="p">)])</span>

    <span class="n">delta</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="n">epsilon</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">)])</span>
    <span class="n">delta</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="n">epsilon</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">)])</span>

    <span class="n">delta</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;a&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)])</span>
    <span class="n">delta</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)])</span>

    <span class="n">delta</span><span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="n">epsilon</span><span class="p">,</span><span class="s2">&quot;z&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([(</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;z&quot;</span><span class="p">)])</span>

    <span class="n">npda</span> <span class="o">=</span> <span class="n">NPDA</span><span class="p">(</span><span class="n">delta</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;z&quot;</span><span class="p">,</span><span class="nb">set</span><span class="p">([</span><span class="mi">2</span><span class="p">]))</span>

    <span class="n">x</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter a string of a&#39;s and b&#39;s: &quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">npda</span><span class="o">.</span><span class="n">accepts</span><span class="p">(</span><span class="n">streamreader</span><span class="o">.</span><span class="n">StreamReader</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">x</span><span class="p">))):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Yes, in the language.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Nope! Not in the language.&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="ll-1-grammars">
<h2>7.2. LL(1) Grammars<a class="headerlink" href="#ll-1-grammars" title="Permalink to this headline">¶</a></h2>
<p>LL(1) grammars are grammars that can be used to determinitically build a left-most derivation of a word, w, by looking ahead at the next symbol of w. Consider the grammar of prefix expressions.</p>
<blockquote>
<div><img class="math" src="../_images/math/f30ec6d6257eb07242795296bb077fc9d545bb9d.png" alt="E \rightarrow + E E \mid - E E \mid * E E \mid / E E \mid integer"/></div></blockquote>
<p>To construct a parser for such a language, we can build a series of functions, one for each nonterminal. Each nonterminal, in this case E, becomes a function in an LL(1) parser. The body of the function is given by the right hand side (rhs) of each of its productions. For instance, in this case we get a token and if it is a ‘+’ we call the E function two more times.</p>
</div>
<div class="section" id="lalr-1-grammars">
<h2>7.3. LALR(1) Grammars<a class="headerlink" href="#lalr-1-grammars" title="Permalink to this headline">¶</a></h2>
<p>An LALR(1) grammar is a grammar that is suitable for deterministic parsing using one symbol of lookahead to deterministically make choices with the pushdown automaton. An example of an LALR(1) grammar is the list expression grammar.</p>
<blockquote>
<div><ul class="simple">
<li><img class="math" src="../_images/math/02c7b9b9917a1e7fc076b60366361d58a3a1b7db.png" alt="LE \rightarrow LE &#64; LT"/></li>
<li><img class="math" src="../_images/math/085317b61883dd67c06bffee85907e59688671ef.png" alt="LE \rightarrow LT"/></li>
<li><img class="math" src="../_images/math/6cb26652b80b1cffcbd77377644cfd4c9991e7a2.png" alt="LT \rightarrow int :: LT"/></li>
<li><img class="math" src="../_images/math/83d74db4a97f845b1b340c1b6637273db973d92c.png" alt="LT \rightarrow Lit"/></li>
<li><img class="math" src="../_images/math/15e63a22c24e6c376c35a675b2fe7a9b77b1ad4b.png" alt="Lit \rightarrow [ ListSeq ]"/></li>
<li><img class="math" src="../_images/math/2a00a326d0225c40eca8cd08039e3d6fb71a01f1.png" alt="Lit \rightarrow nil"/></li>
<li><img class="math" src="../_images/math/92a13e7d870a6154c71bf1d6d242f3e07d9b1da6.png" alt="ListSeq \rightarrow int , ListSeq"/></li>
<li><img class="math" src="../_images/math/e70eeb2fa584a80314b52b4d7b49a1a621cfc1f5.png" alt="ListSeq \rightarrow int"/></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="building-the-lr0-machine">
<h2>7.4. Building the LR0 Machine<a class="headerlink" href="#building-the-lr0-machine" title="Permalink to this headline">¶</a></h2>
<p>To build the LR0 machine we consider the productions of a context-free grammar and build what are called <em>item sets</em>. An item is a production with a dot (i.e. period) placed somewhere on the right hand side (rhs) of the production.</p>
<p>We start by first augmenting the grammar to include one more production of <img class="math" src="../_images/math/2a783014f28af6db4d35c8f7901785dc41f515ae.png" alt="GOAL \rightarrow S~eof"/> where eof stands for end of file. Sometimes the pound sign (i.e. #) is used to represent eof in the literature on this construction. Then we start the construction of LR0 machine with the item <img class="math" src="../_images/math/a6633db78f98ea5ee51024ae67d28a5bc4eeed28.png" alt="GOAL \rightarrow \bullet S~eof"/>. For each new item we call the <img class="math" src="../_images/math/79c8b6f50302093d8c80c12951983606c2d8391d.png" alt="Completion"/> function on it to add any other items that belong to the same state of the LR0 machine. If <img class="math" src="../_images/math/cd2501e7678812bfccbf5f2c8d18046ba6370726.png" alt="Completion(itemSet)"/> results in a new LR0 State, then the state is added to the LR0 Machine and added to the stack of unexplored states. The first unexplored state is</p>
<blockquote>
<div><img class="math" src="../_images/math/df81cec1648dda1ee3f686e2a6933019f3a60d48.png" alt="Completion(GOAL \rightarrow \bullet StartSymbol~eof"/></div></blockquote>
<div class="section" id="the-completion-function">
<h3>7.4.1. The Completion Function<a class="headerlink" href="#the-completion-function" title="Permalink to this headline">¶</a></h3>
<p>The Completion or closure function adds items to an item set to <em>complete</em> an item set. Completion is given an item set and completes it by examining each item of the form <img class="math" src="../_images/math/af40c57f6880530d42b81e9358a6b7b5cbb22826.png" alt="A \rightarrow \alpha \bullet X \beta"/>. To this item set, each item of the form <img class="math" src="../_images/math/99f23075cb381f6df52be7ab1ca097d4f675e7aa.png" alt="X \rightarrow \bullet \gamma"/> is added, <img class="math" src="../_images/math/136d0b0a0dbc201ea0c2746fd76f97d02f818f71.png" alt="\alpha, \beta, \gamma \in \{T \cup N\}^*"/>.</p>
</div>
<div class="section" id="the-successor-function">
<h3>7.4.2. The Successor Function<a class="headerlink" href="#the-successor-function" title="Permalink to this headline">¶</a></h3>
<p>For the completed item set in an LR0 state, the Successor function builds a set of next LR0 states. Assume <img class="math" src="../_images/math/ea5287e4a1c190cea53c895c7dfe087e12f2e990.png" alt="X \in \{T \cup N\}"/> in an item <img class="math" src="../_images/math/af40c57f6880530d42b81e9358a6b7b5cbb22826.png" alt="A \rightarrow \alpha \bullet X \beta"/> associated with some LR0 state <img class="math" src="../_images/math/169c982b5e649cd1bd6445df5583affe427ea269.png" alt="U"/>. Then there is a transition from <img class="math" src="../_images/math/169c982b5e649cd1bd6445df5583affe427ea269.png" alt="U"/> to a state <img class="math" src="../_images/math/fae0e7a73748991e5540d874416000583f64f58e.png" alt="V"/> containing the item <img class="math" src="../_images/math/5fd13597b56baf5c269ab919c7195aff2816f02b.png" alt="A \rightarrow \alpha  X \bullet \beta"/>. Again, <img class="math" src="../_images/math/5f92d45cac93cb1603a6dee0e1237ef1c5cf1bfd.png" alt="\alpha, \beta \in \{T \cup N\}^*"/>.</p>
<p>The algorithm for building the LR0 machine proceeds by finding all the successors of an LR0 State. If any of these successors are new states, they are added to the stack of unexplored states. This stack is popped repeatedly finding successors for the unexplored states until the stack is empty.</p>
<div class="figboxcenter docutils container">
<div class="figure" id="id1">
<span id="lr0machine"></span><img alt="../_images/listexp.png" src="../_images/listexp.png" />
<p class="caption"><span class="caption-text">Fig. 1: The List Expression LR(0) Machine with Lookahead Sets</span></p>
</div>
</div>
</div>
</div>
<div class="section" id="the-lr0state-class-and-its-components">
<h2>7.5. The LR0State Class and its Components<a class="headerlink" href="#the-lr0state-class-and-its-components" title="Permalink to this headline">¶</a></h2>
<p>The code for LR0 States includes an LR0State class. Each LR0State is composed of one or more LR0Items. Each LR0Item is a Production with a dot on the right hand side. The classes for all three: LR0State, LR0Item, and Production are all included in the code here.</p>
<blockquote>
<div><div class="figboxcenter docutils container">
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">epsilon</span> <span class="o">=</span> <span class="s2">&quot;EPSILON&quot;</span>
<span class="n">NoTransition</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

<span class="k">class</span> <span class="nc">LR0State</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">items</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(),</span> <span class="n">transitions</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">accepting</span> <span class="o">=</span> <span class="bp">False</span><span class="p">):</span>
        <span class="c1"># An id of -1 is not allowed since that indicates there is</span>
        <span class="c1"># no transition on a value.</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;A state id of -1 is not allowed.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="c1"># A copy of the list of transitions needs to be created</span>
        <span class="c1"># because Python makes only one instance of a default</span>
        <span class="c1"># parameter. Changing the list later, by adding a transition</span>
        <span class="c1"># would add that transition to every state. Wow! Talk about</span>
        <span class="c1"># bad semantics...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transitions</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">transitions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">predecessors</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="n">items</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accepting</span> <span class="o">=</span> <span class="n">accepting</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tnts</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">val</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">val</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">(</span><span class="n">item</span><span class="p">))</span> <span class="o">%</span> <span class="mi">999999999</span>

        <span class="k">return</span> <span class="n">val</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">items</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>

        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">isAccepting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">accepting</span>

    <span class="k">def</span> <span class="nf">setClasses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">classes</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">classes</span> <span class="o">=</span> <span class="n">classes</span>

    <span class="k">def</span> <span class="nf">addTransition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">onClass</span><span class="p">,</span> <span class="n">aState</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transitions</span><span class="p">[</span><span class="n">onClass</span><span class="p">]</span><span class="o">=</span><span class="n">aState</span><span class="o">.</span><span class="n">id</span>
        <span class="k">if</span> <span class="n">onClass</span> <span class="ow">in</span> <span class="n">aState</span><span class="o">.</span><span class="n">predecessors</span><span class="p">:</span>
            <span class="n">aState</span><span class="o">.</span><span class="n">predecessors</span><span class="p">[</span><span class="n">onClass</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">aState</span><span class="o">.</span><span class="n">predecessors</span><span class="p">[</span><span class="n">onClass</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">hasTransition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">onClass</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">onClass</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transitions</span>

    <span class="k">def</span> <span class="nf">onClassGoTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">onClass</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">onClass</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transitions</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transitions</span><span class="p">[</span><span class="n">onClass</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">NoTransition</span>

    <span class="k">def</span> <span class="nf">pred</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">onClass</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">onClass</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predecessors</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">predecessors</span><span class="p">[</span><span class="n">onClass</span><span class="p">]</span>

        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="k">def</span> <span class="nf">getTransitions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transitions</span>

    <span class="k">def</span> <span class="nf">getId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span>

    <span class="c1">#def productions(self):</span>
    <span class="c1">#    prodSet = set()</span>
    <span class="c1">#    for item in self.items:</span>
    <span class="c1">#        prodSet.add(item.production.id)</span>
    <span class="c1">#</span>
    <span class="c1">#    return prodSet</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;LR0State(&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> \
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transitions</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">accepting</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">val</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">val</span> <span class="o">=</span> <span class="s2">&quot;LR0State &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">accepting</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">+=</span> <span class="s2">&quot; is accepting</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">for</span> <span class="n">on</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transitions</span><span class="p">:</span>
            <span class="n">toStateId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transitions</span><span class="p">[</span><span class="n">on</span><span class="p">]</span>
            <span class="n">val</span> <span class="o">+=</span> <span class="s2">&quot;    On &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tnts</span><span class="p">[</span><span class="n">on</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; Go To &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">toStateId</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">+=</span> <span class="s2">&quot;    Item: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">return</span> <span class="n">val</span>

<span class="k">class</span> <span class="nc">Production</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">lhsId</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">rhs</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">returnValue</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rhs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">rhs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lhsId</span> <span class="o">=</span> <span class="n">lhsId</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">returnValue</span> <span class="o">=</span> <span class="n">returnValue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tnts</span> <span class="o">=</span> <span class="bp">None</span>


    <span class="k">def</span> <span class="nf">addRHSItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tntId</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rhs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tntId</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tnts</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tnts</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lhsId</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; --&gt; &quot;</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rhs</span><span class="p">)):</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tnts</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">rhs</span><span class="p">[</span><span class="n">k</span><span class="p">]]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span>

            <span class="k">return</span> <span class="n">s</span>

        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Production(&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lhsId</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rhs</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">returnValue</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>

<span class="k">class</span> <span class="nc">LR0Item</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">id</span><span class="p">,</span><span class="n">production</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">dotIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">la</span><span class="o">=</span><span class="nb">frozenset</span><span class="p">()):</span>
        <span class="c1"># make a copy of the set and list below</span>
        <span class="c1"># because sets are mutable and</span>
        <span class="c1"># default arguments are only created once.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">production</span> <span class="o">=</span> <span class="n">production</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dotIndex</span> <span class="o">=</span> <span class="n">dotIndex</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tnts</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">la</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">la</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Comparison of LR0Item &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; with &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dotIndex</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">dotIndex</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">production</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">production</span><span class="o">.</span><span class="n">id</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># the 100000 is really just a random number, but it</span>
        <span class="c1"># does allow for a unique hash code up to 100,000 elements</span>
        <span class="c1"># (i.e. terminal and nonterminals) on the right hand</span>
        <span class="c1"># side of any production.</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">production</span><span class="o">.</span><span class="n">id</span> <span class="o">*</span> <span class="mi">100000</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dotIndex</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tnts</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tnts</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">production</span><span class="o">.</span><span class="n">lhsId</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; ::= &quot;</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">production</span><span class="o">.</span><span class="n">rhs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;(*)&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">production</span><span class="o">.</span><span class="n">rhs</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">dotIndex</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;(*) &quot;</span>

                    <span class="n">s</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tnts</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">production</span><span class="o">.</span><span class="n">rhs</span><span class="p">[</span><span class="n">k</span><span class="p">]]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dotIndex</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">production</span><span class="o">.</span><span class="n">rhs</span><span class="p">):</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;(*)&quot;</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">la</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">s</span><span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">        Lookaheads: &quot;</span>
                <span class="n">first</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">for</span> <span class="n">termId</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">la</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">first</span><span class="p">:</span>
                        <span class="n">first</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">s</span><span class="o">+=</span><span class="s2">&quot;, &quot;</span>
                    <span class="n">s</span><span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tnts</span><span class="p">[</span><span class="n">termId</span><span class="p">]</span>
            <span class="n">s</span><span class="o">+=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">return</span> <span class="n">s</span>

        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;LR0Item(&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">production</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dotIndex</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">la</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
</pre></div>
</td></tr></table></div>
</div>
</div></blockquote>
</div>
<div class="section" id="computing-lookahead-sets">
<h2>7.6. Computing Lookahead Sets<a class="headerlink" href="#computing-lookahead-sets" title="Permalink to this headline">¶</a></h2>
<p>Lookahead sets can be computed using the algorithm presented in a paper titled “Methods for Computing LALR(k) Lookahead” by Bent Bruun Kristensen and Ole Lehrmann Madsen of Aarhus University, ACM Transactions on Programming Languages and Systems, Vol. 3, No. 1, January 1981, Pages 60-82. This paper can be found in the <a class="reference external" href="http://dl.acm.org/citation.cfm?id=357126">ACM Digital Library</a> and a copy is available for my students.</p>
</div>
<div class="section" id="running-the-lalr-1-machine">
<h2>7.7. Running the LALR(1) Machine<a class="headerlink" href="#running-the-lalr-1-machine" title="Permalink to this headline">¶</a></h2>
<p>A bottom-up parser for an LALR(1) language is a deterministic pushdown automaton. The parser constructs a right-most derivation of a sentence in reverse order. Consider the list expression 3::[1,2]. A right-most derivation for this sentence is given below (using the augmented grammar).</p>
<blockquote>
<div><img class="math" src="../_images/math/44d4e7ea921738edf3b0a30553d4fa4149d1dd5e.png" alt="Goal \rightarrow LE~eof \rightarrow LT~eof \rightarrow 3 :: LT~eof \rightarrow 3 :: Lit~eof"/>
<img class="math" src="../_images/math/cc9136353d3edb08ea615b986109b4824ec2bcd3.png" alt="\rightarrow 3 :: [ ListSeq ] ~eof\rightarrow 3 :: [ 1 , ListSeq ] ~eof \rightarrow 3 :: [ 1 , 2 ] ~eof \Box"/></div></blockquote>
<p>You can think of their being a dot that moves from left to right through the sentence. All items to the left of the dot are shifted onto the PDA stack. The items to the right of the dot must be read yet. The dot starts at the left hand side of the sentence and ends at the right hand side of the sentence. The dot corresponds to the dot in the items of the LR(0) machine.</p>
<blockquote>
<div><img class="math" src="../_images/math/cb3d42ed0953c902f949cfcb43976f038e469c7f.png" alt="\bullet 3 :: [ 1 , 2 ] ~eof"/></div></blockquote>
<p>The machine proceeds by starting in state 0 and following transitions when it can to shift items onto the stack. <em>Shift</em> is one of the two operations of the parser. When no <em>shift</em> is possible in a state, given the next input symbol, then a <em>reduce</em> operation occurs if the next input symbol is in a lookahead set. The reduce operation is described below.</p>
<p>The machine starts by pushing the state identifier and the Goal identifier onto the stack as a tuple. Then it proceeds as follows looping until the accepting state is found.</p>
<blockquote>
<div><ol class="arabic simple">
<li>Peek at the top of the stack to find the (stateId, RHS symbol) pair.</li>
<li>If a token is needed then get a token from the scanner.</li>
<li>Examine the token and the current state to determine if there is a transition on the token to a new state. If so, then push the (new stateid, token) pair onto the stack. This is called a shift operation.</li>
<li>If there is no transition from the given state on the given token, then look for an item with a lookahead set containing the item. If an LR(0) item is found whose lookahead set contains the token, then <em>reduce</em> by popping the length of the right hand side of the item from the stack. Then peek at the top of the stack to see what state is now one top. Do a transition from that state on the LHS of the item by which you are reducing. Push that (newStateId, LHS) onto the stack.</li>
</ol>
</div></blockquote>
<p>A parser constructed in such a way can answer <em>yes</em> or <em>no</em> as to the membership of a sentence in the language of a grammar. More interestingly, an abstract syntax tree can be built by evaluating a return value for each reduction that occurs in the parsing of a sentence. The code below provides an outline for the parser code along with a method called {em buildReturnValue} that builds value for the return value of a parser.</p>
<blockquote>
<div><div class="figboxcenter docutils container">
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">lr0state</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">stack</span>
<span class="kn">import</span> <span class="nn">streamreader</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">class</span> <span class="nc">Parser</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">states</span><span class="p">,</span><span class="n">tnts</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">states</span> <span class="o">=</span> <span class="n">states</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tnts</span> <span class="o">=</span> <span class="n">tnts</span>
        <span class="k">for</span> <span class="n">stateId</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
            <span class="n">theState</span> <span class="o">=</span> <span class="n">states</span><span class="p">[</span><span class="n">stateId</span><span class="p">]</span>
            <span class="n">theState</span><span class="o">.</span><span class="n">tnts</span> <span class="o">=</span> <span class="n">tnts</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">theState</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">tnts</span> <span class="o">=</span> <span class="n">tnts</span>


    <span class="k">def</span> <span class="nf">buildReturnValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">item</span><span class="p">,</span><span class="n">prodStack</span><span class="p">):</span>
        <span class="c1"># We found an item to reduce by.</span>
        <span class="n">prodNames</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># this is a map from return value names to locations with rhs</span>
        <span class="n">tntCount</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">rhsVals</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># this is a map from index location of rhs to value from the stack.</span>

        <span class="c1"># this loop builds a map from names of rhs terminals or nonterminals to</span>
        <span class="c1"># their index value for the rhs</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">production</span><span class="o">.</span><span class="n">rhs</span><span class="p">)):</span>
            <span class="n">tntId</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">production</span><span class="o">.</span><span class="n">rhs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">tnt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tnts</span><span class="p">[</span><span class="n">tntId</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">tnt</span> <span class="ow">in</span> <span class="n">tntCount</span><span class="p">:</span>
                <span class="n">tntCount</span><span class="p">[</span><span class="n">tnt</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="n">prodNames</span><span class="p">[</span><span class="n">tnt</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
                <span class="n">prodNames</span><span class="p">[</span><span class="n">tnt</span><span class="o">+</span><span class="s2">&quot;1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">numVal</span> <span class="o">=</span> <span class="n">tntCount</span><span class="p">[</span><span class="n">tnt</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span>
                <span class="n">tntCount</span><span class="p">[</span><span class="n">tnt</span><span class="p">]</span> <span class="o">=</span> <span class="n">numVal</span>
                <span class="n">prodNames</span><span class="p">[</span><span class="n">tnt</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">numVal</span><span class="p">)]</span><span class="o">=</span><span class="n">i</span>


        <span class="c1"># this loop builds a map from index value of rhs location to</span>
        <span class="c1"># the actual value popped from the pda stack.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">production</span><span class="o">.</span><span class="n">rhs</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">stateId</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="n">prodStack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="n">rhsVals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>

        <span class="n">returnValue</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">rvStrm</span>  <span class="o">=</span> <span class="n">streamreader</span><span class="o">.</span><span class="n">StreamReader</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">production</span><span class="o">.</span><span class="n">returnValue</span><span class="p">))</span>

        <span class="c1"># Here we iterate through the parts of the return value replacing any</span>
        <span class="c1"># non-terminal token with the actual value popped from the stack</span>
        <span class="c1"># used in parsing. This builds the actual return value for the expression</span>
        <span class="c1"># being parsed.</span>

        <span class="n">token</span> <span class="o">=</span> <span class="n">rvStrm</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span>

        <span class="k">while</span> <span class="ow">not</span> <span class="n">rvStrm</span><span class="o">.</span><span class="n">eof</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">prodNames</span><span class="p">:</span>
                <span class="n">returnValue</span> <span class="o">+=</span> <span class="n">rhsVals</span><span class="p">[</span><span class="n">prodNames</span><span class="p">[</span><span class="n">token</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">returnValue</span> <span class="o">+=</span> <span class="n">token</span>

            <span class="n">token</span> <span class="o">=</span> <span class="n">rvStrm</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span>

        <span class="c1"># Here we call the overridden eval method to evaluate</span>
        <span class="c1"># the return value string in the context of the parser&#39;s</span>
        <span class="c1"># back end module. This is because each parser instance</span>
        <span class="c1"># inherits from this class to define its own parser</span>
        <span class="c1"># and backend code.</span>

        <span class="n">val</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="n">returnValue</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">val</span>

    <span class="c1"># This is called in case of an error because no shift or reduce was possible.</span>
    <span class="k">def</span> <span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">stateId</span><span class="p">,</span><span class="n">tokenId</span><span class="p">,</span><span class="n">prodStack</span><span class="p">):</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;No Transition Found</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">State is &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">stateId</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Stack Contents</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;==============</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">prodStack</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Next Input Symbol is &quot;</span><span class="o">+</span><span class="n">lex</span><span class="o">+</span><span class="s2">&quot; with tokenId of &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">tokenId</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;No transition on state!&quot;</span><span class="p">)</span>


    <span class="c1"># This algorithm comes from page 218, Algorithm 4.7 from Aho,</span>
    <span class="c1"># Sethi, and Ullman.</span>
    <span class="c1"># The modification from this algorithm has the stack a stack of</span>
    <span class="c1"># tuples of (stateId, val) where val is the return value</span>
    <span class="c1"># for a terminal or nonterminal.</span>
    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theScanner</span><span class="p">):</span>

        <span class="c1"># create a stack called prodStack.</span>

        <span class="c1"># push the start state and return value. The initial return value can be None.</span>

        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="c1"># Peek at the top of the stack to get the stateId and return value.</span>

            <span class="c1"># Get a token if needed.</span>

            <span class="c1"># Do a shift operation if there is a transition on the tokenId. If we also had the same</span>
            <span class="c1"># tokenId in a lookahead set we would have a shift/reduce conflict, but we&#39;ll always shift</span>
            <span class="c1"># anyway in that case so don&#39;t worry about detecting shift/reduce conflicts.</span>

            <span class="c1"># If no shift operation is possible then look for a reduce possibility.</span>
            <span class="c1"># we look in the items of the state for an item that would</span>
            <span class="c1"># work to reduce by. If more than one item is found then we have a</span>
            <span class="c1"># reduce/reduce conflict.</span>

            <span class="c1"># If an item to reduce by is found then call buildReturnValue which will build the return</span>
            <span class="c1"># value (e.g. usually an AST) for the reduction.</span>
            <span class="c1"># NOTE: buildReturnValue pops off the correct number of values from the stack, but does not</span>
            <span class="c1"># push on the new state found by following the transition on the LHS of the chosen item.</span>

            <span class="c1"># if no item was found for a shift or reduce operation, then tere is a problem so raise an exception</span>
            <span class="c1"># by calling the error function.</span>
            <span class="k">pass</span>
</pre></div>
</td></tr></table></div>
</div>
</div></blockquote>
</div>
<div class="section" id="exercises">
<h2>7.8. Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Using the prefix grammar presented in this chapter, build a parser for prefix expressions that returns an abstract syntax tree of an expression. Then, traverse the abstract syntax tree to print the postfix form of that expression.</p>
<p>To complete this program you must build an LL(1) parser along with classes for the abstract syntax tree nodes of expressions. Write an eval method for each node in your abstract syntax tree that when called builds a string of the postfix expression. So your program should use a StreamReader over the string entered by the user to get the tokens of the string. The parser is called to parse the entered input and the parser should return an abstract syntax tree of the expression. Then eval is called on your abstract syntax tree to build the postfix expression which is then printed.</p>
</li>
<li><p class="first">For the following grammar, generate the LR0 machine by generating each item set for each state of the machine. Then identify the transitions of the machine in table form where rows are the state identifiers and columns are the various <img class="math" src="../_images/math/3da85cccb78725a4abd689c034ddf15556441446.png" alt="\{T \cup N\}"/> vocabulary symbols. Be sure to augment the grammar first!</p>
<blockquote>
<div><ul class="simple">
<li><img class="math" src="../_images/math/729940a92a09876ddcc293e0dddbb4159fb0f644.png" alt="E \rightarrow E + T"/></li>
<li><img class="math" src="../_images/math/675fe120033cf68a3949412e4340f74526ea0f4f.png" alt="E \rightarrow E - T"/></li>
<li><img class="math" src="../_images/math/db3377577499ec9603c89e6815f9cf3cab79fd80.png" alt="E \rightarrow T"/></li>
<li><img class="math" src="../_images/math/4ea25d9e1ff9259f6e92485253d50343b1e88bc8.png" alt="T \rightarrow integer"/></li>
<li><img class="math" src="../_images/math/c38843cb9b6e721cd5ee80c199289a4cfb962aab.png" alt="T \rightarrow ( E )"/></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Complete the <a class="reference external" href="../../../examplefiles/calc.tar.gz">calculator project which can be downloaded here</a>. This project is an infix calculator with one memory location. The primary purpose of this project is to implement the scanner and the parser (i.e. pushdown automaton). The project gives you the finite state machine and the LALR(1) machine. Your job is only to write the getToken method of the scanner and the parse method of the parser. You can do this incrementally, writing the getToken method first, if you change the calculator.py main function to create the scanner and then construct a while loop to get all the tokens from the input until you encounter the EOF (endoffile) token.</p>
</li>
</ol>
<p>The finite state machine of the scanner and the LR0 Machine with lookaheads is provided below for your reference but is already provided in the project download as coded in both calcscanner.py and calcparser.py. Interacting with the calculator works like this.</p>
<blockquote>
<div><div class="figboxcenter docutils container">
<div class="highlight-text notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Kent&#39;s Mac&gt; calculator
Enter expressions with +,-,*,/,S (for store), and R (for recall) and terminated by a semicolon (i.e. ;).
S 5 * R;
25.0
4*(5+3);
32.0
39/2;
19.5
24 + 3*2;
30.0
S5 + 3*R;
20.0
</pre></div>
</td></tr></table></div>
</div>
</div></blockquote>
<p>Here is the Finite State Machine of the Scanner and the LR0 Machine with Lookaheads of the parser.</p>
<blockquote>
<div><div class="figboxcenter docutils container">
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">MINIMAL</span> <span class="n">DFA</span> <span class="n">CREATED</span> <span class="n">FOR</span> <span class="n">THE</span> <span class="n">REGULAR</span> <span class="n">EXPRESSIONS</span> <span class="n">IS</span><span class="p">:</span>

<span class="n">The</span> <span class="n">start</span> <span class="n">state</span> <span class="ow">is</span><span class="p">:</span> <span class="mi">0</span>

<span class="n">STATE</span>     <span class="n">ON</span> <span class="n">CLASS</span>     <span class="n">GO</span> <span class="n">TO</span>     <span class="n">ACCEPTS</span>
<span class="o">-----</span>     <span class="o">--------</span>     <span class="o">-----</span>     <span class="o">-------</span>
    <span class="mi">0</span>
                 <span class="n">S</span>        <span class="mi">10</span>
                 <span class="o">/</span>         <span class="mi">6</span>
                 <span class="p">;</span>         <span class="mi">7</span>
                 <span class="o">*</span>         <span class="mi">3</span>
                 <span class="p">(</span>         <span class="mi">1</span>
                 <span class="o">-</span>         <span class="mi">5</span>
                 <span class="n">R</span>         <span class="mi">9</span>
                 <span class="o">+</span>         <span class="mi">4</span>
             <span class="n">digit</span>        <span class="mi">11</span>
               <span class="n">EOF</span>         <span class="mi">8</span>
                 <span class="p">)</span>         <span class="mi">2</span>

    <span class="mi">1</span>                                  <span class="p">(</span>

    <span class="mi">2</span>                                  <span class="p">)</span>

    <span class="mi">3</span>                                  <span class="o">*</span>

    <span class="mi">4</span>                                  <span class="o">+</span>

    <span class="mi">5</span>                                  <span class="o">-</span>

    <span class="mi">6</span>                                  <span class="o">/</span>

    <span class="mi">7</span>                                  <span class="p">;</span>

    <span class="mi">8</span>                          <span class="n">endoffile</span>

    <span class="mi">9</span>                                  <span class="n">R</span>

   <span class="mi">10</span>                                  <span class="n">S</span>

   <span class="mi">11</span>                             <span class="n">number</span>
            <span class="n">period</span>        <span class="mi">12</span>
             <span class="n">digit</span>        <span class="mi">11</span>

   <span class="mi">12</span>
             <span class="n">digit</span>        <span class="mi">13</span>

   <span class="mi">13</span>                             <span class="n">number</span>
             <span class="n">digit</span>        <span class="mi">13</span>

<span class="n">Scangen</span> <span class="n">Completed</span><span class="o">.</span>
<span class="n">Running</span> <span class="n">Parsegen</span>
<span class="ne">Warning</span><span class="p">:</span> <span class="n">There</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">shift</span><span class="o">/</span><span class="nb">reduce</span> <span class="n">conflict</span> <span class="ow">in</span> <span class="n">state</span> <span class="mi">11</span> <span class="n">on</span> <span class="n">terminal</span> <span class="s1">&#39;*&#39;</span>
         <span class="n">Conflict</span> <span class="n">will</span> <span class="n">be</span> <span class="n">resolved</span> <span class="n">by</span> <span class="n">shifting</span><span class="o">.</span>
<span class="ne">Warning</span><span class="p">:</span> <span class="n">There</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">shift</span><span class="o">/</span><span class="nb">reduce</span> <span class="n">conflict</span> <span class="ow">in</span> <span class="n">state</span> <span class="mi">11</span> <span class="n">on</span> <span class="n">terminal</span> <span class="s1">&#39;/&#39;</span>
         <span class="n">Conflict</span> <span class="n">will</span> <span class="n">be</span> <span class="n">resolved</span> <span class="n">by</span> <span class="n">shifting</span><span class="o">.</span>
<span class="ne">Warning</span><span class="p">:</span> <span class="n">There</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">shift</span><span class="o">/</span><span class="nb">reduce</span> <span class="n">conflict</span> <span class="ow">in</span> <span class="n">state</span> <span class="mi">18</span> <span class="n">on</span> <span class="n">terminal</span> <span class="s1">&#39;*&#39;</span>
         <span class="n">Conflict</span> <span class="n">will</span> <span class="n">be</span> <span class="n">resolved</span> <span class="n">by</span> <span class="n">shifting</span><span class="o">.</span>
<span class="ne">Warning</span><span class="p">:</span> <span class="n">There</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">shift</span><span class="o">/</span><span class="nb">reduce</span> <span class="n">conflict</span> <span class="ow">in</span> <span class="n">state</span> <span class="mi">18</span> <span class="n">on</span> <span class="n">terminal</span> <span class="s1">&#39;/&#39;</span>
         <span class="n">Conflict</span> <span class="n">will</span> <span class="n">be</span> <span class="n">resolved</span> <span class="n">by</span> <span class="n">shifting</span><span class="o">.</span>
<span class="ne">Warning</span><span class="p">:</span> <span class="n">There</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">shift</span><span class="o">/</span><span class="nb">reduce</span> <span class="n">conflict</span> <span class="ow">in</span> <span class="n">state</span> <span class="mi">19</span> <span class="n">on</span> <span class="n">terminal</span> <span class="s1">&#39;*&#39;</span>
         <span class="n">Conflict</span> <span class="n">will</span> <span class="n">be</span> <span class="n">resolved</span> <span class="n">by</span> <span class="n">shifting</span><span class="o">.</span>
<span class="ne">Warning</span><span class="p">:</span> <span class="n">There</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">shift</span><span class="o">/</span><span class="nb">reduce</span> <span class="n">conflict</span> <span class="ow">in</span> <span class="n">state</span> <span class="mi">19</span> <span class="n">on</span> <span class="n">terminal</span> <span class="s1">&#39;/&#39;</span>
         <span class="n">Conflict</span> <span class="n">will</span> <span class="n">be</span> <span class="n">resolved</span> <span class="n">by</span> <span class="n">shifting</span><span class="o">.</span>
<span class="n">LR0State</span> <span class="mi">0</span>
    <span class="n">On</span> <span class="n">Prog</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">1</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">Start</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">Prog</span> <span class="n">endoffile</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">Prog</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">Prog</span> <span class="n">Stmt</span> <span class="s1">&#39;;&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">Prog</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">endoffile</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span>


<span class="n">LR0State</span> <span class="mi">1</span>
    <span class="n">On</span> <span class="n">St</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">2</span>
    <span class="n">On</span> <span class="n">F</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">3</span>
    <span class="n">On</span> <span class="s1">&#39;(&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">4</span>
    <span class="n">On</span> <span class="n">number</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">5</span>
    <span class="n">On</span> <span class="s1">&#39;S&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">6</span>
    <span class="n">On</span> <span class="s1">&#39;R&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">7</span>
    <span class="n">On</span> <span class="n">endoffile</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">8</span>
    <span class="n">On</span> <span class="n">Stmt</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">9</span>
    <span class="n">On</span> <span class="n">E</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">10</span>
    <span class="n">On</span> <span class="n">T</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">11</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">Stmt</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">E</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">Start</span> <span class="p">::</span><span class="o">=</span> <span class="n">Prog</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">endoffile</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">Prog</span> <span class="p">::</span><span class="o">=</span> <span class="n">Prog</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">Stmt</span> <span class="s1">&#39;;&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">E</span> <span class="s1">&#39;+&#39;</span> <span class="n">T</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">E</span> <span class="s1">&#39;-&#39;</span> <span class="n">T</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">T</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">T</span> <span class="s1">&#39;*&#39;</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">T</span> <span class="s1">&#39;/&#39;</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;S&#39;</span> <span class="n">F</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">F</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;R&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;(&#39;</span> <span class="n">E</span> <span class="s1">&#39;)&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">number</span>


<span class="n">LR0State</span> <span class="mi">2</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="n">St</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span>


<span class="n">LR0State</span> <span class="mi">3</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="n">F</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span>


<span class="n">LR0State</span> <span class="mi">4</span>
    <span class="n">On</span> <span class="n">St</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">2</span>
    <span class="n">On</span> <span class="n">F</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">3</span>
    <span class="n">On</span> <span class="s1">&#39;(&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">4</span>
    <span class="n">On</span> <span class="n">number</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">5</span>
    <span class="n">On</span> <span class="s1">&#39;S&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">6</span>
    <span class="n">On</span> <span class="s1">&#39;R&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">7</span>
    <span class="n">On</span> <span class="n">E</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">22</span>
    <span class="n">On</span> <span class="n">T</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">11</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">E</span> <span class="s1">&#39;+&#39;</span> <span class="n">T</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="s1">&#39;(&#39;</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">E</span> <span class="s1">&#39;)&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">E</span> <span class="s1">&#39;-&#39;</span> <span class="n">T</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">T</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">T</span> <span class="s1">&#39;*&#39;</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">T</span> <span class="s1">&#39;/&#39;</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;S&#39;</span> <span class="n">F</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">F</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">number</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;R&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;(&#39;</span> <span class="n">E</span> <span class="s1">&#39;)&#39;</span>


<span class="n">LR0State</span> <span class="mi">5</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="n">number</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span>


<span class="n">LR0State</span> <span class="mi">6</span>
    <span class="n">On</span> <span class="n">number</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">5</span>
    <span class="n">On</span> <span class="n">F</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">21</span>
    <span class="n">On</span> <span class="s1">&#39;R&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">7</span>
    <span class="n">On</span> <span class="s1">&#39;(&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">4</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">number</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="s1">&#39;S&#39;</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">F</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;(&#39;</span> <span class="n">E</span> <span class="s1">&#39;)&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;R&#39;</span>


<span class="n">LR0State</span> <span class="mi">7</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="s1">&#39;R&#39;</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span>


<span class="n">LR0State</span> <span class="mi">8</span> <span class="ow">is</span> <span class="n">accepting</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">Start</span> <span class="p">::</span><span class="o">=</span> <span class="n">Prog</span> <span class="n">endoffile</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>


<span class="n">LR0State</span> <span class="mi">9</span>
    <span class="n">On</span> <span class="s1">&#39;;&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">20</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">Prog</span> <span class="p">::</span><span class="o">=</span> <span class="n">Prog</span> <span class="n">Stmt</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;;&#39;</span>


<span class="n">LR0State</span> <span class="mi">10</span>
    <span class="n">On</span> <span class="s1">&#39;+&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">16</span>
    <span class="n">On</span> <span class="s1">&#39;-&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">17</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">Stmt</span> <span class="p">::</span><span class="o">=</span> <span class="n">E</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;;&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="n">E</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;+&#39;</span> <span class="n">T</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="n">E</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;-&#39;</span> <span class="n">T</span>


<span class="n">LR0State</span> <span class="mi">11</span>
    <span class="n">On</span> <span class="s1">&#39;*&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">12</span>
    <span class="n">On</span> <span class="s1">&#39;/&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">13</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="n">T</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="n">T</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;*&#39;</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="n">T</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;/&#39;</span> <span class="n">St</span>


<span class="n">LR0State</span> <span class="mi">12</span>
    <span class="n">On</span> <span class="n">St</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">15</span>
    <span class="n">On</span> <span class="n">F</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">3</span>
    <span class="n">On</span> <span class="n">number</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">5</span>
    <span class="n">On</span> <span class="s1">&#39;(&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">4</span>
    <span class="n">On</span> <span class="s1">&#39;R&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">7</span>
    <span class="n">On</span> <span class="s1">&#39;S&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">6</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;S&#39;</span> <span class="n">F</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">F</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="n">T</span> <span class="s1">&#39;*&#39;</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">number</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;(&#39;</span> <span class="n">E</span> <span class="s1">&#39;)&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;R&#39;</span>


<span class="n">LR0State</span> <span class="mi">13</span>
    <span class="n">On</span> <span class="n">St</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">14</span>
    <span class="n">On</span> <span class="n">F</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">3</span>
    <span class="n">On</span> <span class="n">number</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">5</span>
    <span class="n">On</span> <span class="s1">&#39;(&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">4</span>
    <span class="n">On</span> <span class="s1">&#39;R&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">7</span>
    <span class="n">On</span> <span class="s1">&#39;S&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">6</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;S&#39;</span> <span class="n">F</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">F</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="n">T</span> <span class="s1">&#39;/&#39;</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">number</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;(&#39;</span> <span class="n">E</span> <span class="s1">&#39;)&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;R&#39;</span>


<span class="n">LR0State</span> <span class="mi">14</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="n">T</span> <span class="s1">&#39;/&#39;</span> <span class="n">St</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span>


<span class="n">LR0State</span> <span class="mi">15</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="n">T</span> <span class="s1">&#39;*&#39;</span> <span class="n">St</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span>


<span class="n">LR0State</span> <span class="mi">16</span>
    <span class="n">On</span> <span class="n">St</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">2</span>
    <span class="n">On</span> <span class="n">F</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">3</span>
    <span class="n">On</span> <span class="s1">&#39;(&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">4</span>
    <span class="n">On</span> <span class="n">number</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">5</span>
    <span class="n">On</span> <span class="s1">&#39;S&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">6</span>
    <span class="n">On</span> <span class="s1">&#39;R&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">7</span>
    <span class="n">On</span> <span class="n">T</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">19</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">T</span> <span class="s1">&#39;*&#39;</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">T</span> <span class="s1">&#39;/&#39;</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="n">E</span> <span class="s1">&#39;+&#39;</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">T</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;S&#39;</span> <span class="n">F</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">F</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">number</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;(&#39;</span> <span class="n">E</span> <span class="s1">&#39;)&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;R&#39;</span>


<span class="n">LR0State</span> <span class="mi">17</span>
    <span class="n">On</span> <span class="n">St</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">2</span>
    <span class="n">On</span> <span class="n">F</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">3</span>
    <span class="n">On</span> <span class="s1">&#39;(&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">4</span>
    <span class="n">On</span> <span class="n">number</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">5</span>
    <span class="n">On</span> <span class="s1">&#39;S&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">6</span>
    <span class="n">On</span> <span class="s1">&#39;R&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">7</span>
    <span class="n">On</span> <span class="n">T</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">18</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">T</span> <span class="s1">&#39;*&#39;</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">T</span> <span class="s1">&#39;/&#39;</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="n">E</span> <span class="s1">&#39;-&#39;</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">T</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;S&#39;</span> <span class="n">F</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">F</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">number</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;(&#39;</span> <span class="n">E</span> <span class="s1">&#39;)&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;R&#39;</span>


<span class="n">LR0State</span> <span class="mi">18</span>
    <span class="n">On</span> <span class="s1">&#39;*&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">12</span>
    <span class="n">On</span> <span class="s1">&#39;/&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">13</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="n">T</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;*&#39;</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="n">T</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;/&#39;</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="n">E</span> <span class="s1">&#39;-&#39;</span> <span class="n">T</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span>


<span class="n">LR0State</span> <span class="mi">19</span>
    <span class="n">On</span> <span class="s1">&#39;*&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">12</span>
    <span class="n">On</span> <span class="s1">&#39;/&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">13</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="n">T</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;*&#39;</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">T</span> <span class="p">::</span><span class="o">=</span> <span class="n">T</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;/&#39;</span> <span class="n">St</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="n">E</span> <span class="s1">&#39;+&#39;</span> <span class="n">T</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span>


<span class="n">LR0State</span> <span class="mi">20</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">Prog</span> <span class="p">::</span><span class="o">=</span> <span class="n">Prog</span> <span class="n">Stmt</span> <span class="s1">&#39;;&#39;</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">endoffile</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span>


<span class="n">LR0State</span> <span class="mi">21</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">St</span> <span class="p">::</span><span class="o">=</span> <span class="s1">&#39;S&#39;</span> <span class="n">F</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span>


<span class="n">LR0State</span> <span class="mi">22</span>
    <span class="n">On</span> <span class="s1">&#39;)&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">23</span>
    <span class="n">On</span> <span class="s1">&#39;+&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">16</span>
    <span class="n">On</span> <span class="s1">&#39;-&#39;</span> <span class="n">Go</span> <span class="n">To</span> <span class="mi">17</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="n">E</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;+&#39;</span> <span class="n">T</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="s1">&#39;(&#39;</span> <span class="n">E</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;)&#39;</span>

    <span class="n">Item</span><span class="p">:</span> <span class="n">E</span> <span class="p">::</span><span class="o">=</span> <span class="n">E</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="s1">&#39;-&#39;</span> <span class="n">T</span>


<span class="n">LR0State</span> <span class="mi">23</span>
    <span class="n">Item</span><span class="p">:</span> <span class="n">F</span> <span class="p">::</span><span class="o">=</span> <span class="s1">&#39;(&#39;</span> <span class="n">E</span> <span class="s1">&#39;)&#39;</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="n">Lookaheads</span><span class="p">:</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../chap6/index.html" title="6. Simplification of Context-Free Grammars and Normal Forms"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Computational Models</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Kent D. Lee.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>